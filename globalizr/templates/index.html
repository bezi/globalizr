{% extends "base.html" %}
{% load staticfiles %}
{% block head %}
{% endblock %}

{% block content %}
<div class="container">
    <div id="input-wrapper">
        <h1 id="landing-header">globalizr</h1>
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                <input type="search" id="landing-search" placeholder="globalize it." onfocus="this.placeholder = ''"/>
            </div>
        </div>
    </div>
    <div class="row">
        <ul class="about-list">
            <li><a href="/about/#what"><button class="btn my-btn">What</button></a></li>
            <li><a href="/about/#how"><button class="btn my-btn">How</button></a></li>
            <li><a href="/about/#about"><button class="btn my-btn">About</button></a></li>
        </ul>
    </div>
</div><!-- /.container -->
<div id="globe-container"></div>
    <script type="text/javascript" src="{% static 'js/Detector.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/three.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/Tween.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/globe.js' %}"></script>
    <script type="text/javascript">
    function searchQuery() {
        if(!Detector.webgl){
            Detector.addGetWebGLMessage();
        } else {

          var container = document.getElementById('container');
          var globe = new DAT.Globe(container);

          console.log(globe);
          var i, tweens = [];
          
          var xhr;
          TWEEN.start();
          
          xhr = new XMLHttpRequest();
          xhr.open('GET', '/api/interface/flickr/interesting/', true);
          xhr.onreadystatechange = function(e) {
            if (xhr.readyState === 4) {
              if (xhr.status === 200) {
                var data = JSON.parse(xhr.responseText);
                window.data = data;
                if (data.status == 0) {
                    globe.addData(data.data.data, {format: 'magnitude', name: data.data.name, animated: true});
                }
                globe.createPoints();
                globe.animate();
                document.body.style.backgroundImage = 'none'; // remove loading
              }
            }
          };
          xhr.send(null);
        }
    }
    </script>
<div id="legend">
    
</div>
<div id="toolbar">
    
</div>
{% endblock %}
{% block scripts %}
<script>
    $(document).ready(function() {
        $("#input-wrapper").css("opacity", 1);
        $(".about-list").css("opacity", 1);
    });
</script>
{% endblock %}
